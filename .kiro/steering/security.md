# التوجيه الأمني (Security Steering)

## المبدأ الأساسي: الأمان بالصميم (Security by Design)
يجب أن تكون اعتبارات الأمان جزءًا لا يتجزأ من كل مرحلة من مراحل دورة حياة التطوير، وليس مراجعة لاحقة.

## 1. التوجيهات للوكيل (Agent Directives)

1.  **الامتثال لـ OWASP:** يجب على الوكيل التأكد من أن الكود المولد يمنع بشكل استباقي الثغرات المدرجة في **OWASP Top 10** (مثل Injection, Broken Access Control).
2.  **إدارة الأسرار:** يجب على الوكيل **منع** تخزين أي مفاتيح سرية، كلمات مرور، أو رموز وصول (Tokens) في الكود المصدري أو ملفات التكوين. يجب استخدام خدمات إدارة الأسرار المدارة.
3.  **التحقق من المدخلات:** يجب فرض التحقق الصارم من جميع مدخلات المستخدم (Input Validation) لتجنب هجمات الحقن (Injection Attacks).
4.  **أقل الامتيازات (Least Privilege):** يجب أن يتم تصميم جميع الأدوار والمستخدمين والخدمات بأقل مجموعة من الأذونات المطلوبة لأداء وظيفتها.

## 2. أفضل الممارسات الأمنية المعتمدة (Approved Security Best Practices)

| الممارسة | الوصف | الأداة/التقنية المعتمدة |
| :--- | :--- | :--- |
| **إدارة الأسرار** | يجب تخزين واسترجاع جميع الأسرار الحساسة من خدمة سحابية آمنة. | AWS Secrets Manager / HashiCorp Vault |
| **فحص الأمان الوقائي** | يجب فحص الكود بحثًا عن الأسرار قبل الالتزام (Commit). | `hooks/on-commit/10_security_scan.sh` (باستخدام `gitleaks` أو `truffleHog` فعليًا) |
| **المصادقة والتفويض** | يجب استخدام خدمات مصادقة موحدة وموثوقة. | AWS Cognito / Auth0 |
| **تكوين الأمان** | يجب استخدام تكوينات أمان افتراضية صارمة لجميع المكونات (مثل تعطيل الوصول العام لـ S3). | Terraform Security Modules |

## 3. متطلبات الأمان الإلزامية (Mandatory Security Requirements)

*   **التشفير أثناء النقل:** يجب أن يتم تشفير جميع الاتصالات الخارجية باستخدام TLS 1.2 أو أعلى.
*   **التشفير في حالة السكون:** يجب تشفير جميع البيانات الحساسة المخزنة في قواعد البيانات أو أنظمة الملفات.
*   **تسجيل الأمان:** يجب تسجيل جميع أحداث الأمان الهامة (مثل محاولات تسجيل الدخول الفاشلة) ومراقبتها.
